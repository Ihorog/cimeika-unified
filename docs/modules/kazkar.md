# Kazkar — Пам'ять

## 1. Призначення

**Kazkar** (Казкар) — модуль пам'яті, історій та легенд. Збереження та організація особистих спогадів, історій, фактів та легенд у структурованій бібліотеці.

> **⚠️ Важливо**: Kazkar є офіційною "аптекою" (сховищем) для **бібліотеки легенд Ci**. Всі текстові матеріали легенд системи Cimeika зберігаються тут з типом `story_type: "legend"` та тегом `"ci"`.

### Ключові функції:
- Збереження спогадів та історій
- Організація в бібліотеку
- **Зберігання легенд Ci та системної міфології**
- Різні типи записів (історія, спогад, легенда, факт)
- Теги та категорії
- Пошук по змісту
- Зв'язки між записами

## 2. UI-секції

### Frontend компоненти:
- **KazkarView** (`/kazkar`) — головний екран бібліотеки
- **KazkarEntryCard** — картка запису
- Бібліотека записів
- Детальний перегляд
- Редактор записів

### Основні UI елементи:
1. **Огляд бібліотеки** — статистика та останні записи
2. **Список записів** — всі спогади та історії
3. **Детальний перегляд** — повний зміст запису
4. **Редактор** — створення/редагування записів
5. **Фільтри** — за типом, тегами, датою

## 3. API

### Endpoints:

#### `GET /api/kazkar/library`
Отримати огляд бібліотеки
```json
{
  "total_entries": 50,
  "entries_by_type": {
    "story": 20,
    "memory": 15,
    "legend": 10,
    "fact": 5
  },
  "recent_entries": [...]
}
```

#### `GET /api/kazkar/stories`
Отримати всі записи (stories)
```json
{
  "entries": [...],
  "count": 50
}
```

#### `GET /api/kazkar/legends`
Отримати всі легенди (в т.ч. легенди Ci)
```json
[
  {
    "id": 1,
    "title": "Легенда про створення Ci",
    "content": "Текст легенди...",
    "story_type": "legend",
    "tags": ["ci", "origin"]
  }
]
```

#### `POST /api/kazkar/stories`
Створити новий запис або легенду
```json
Request (для легенди Ci):
{
  "title": "Легенда про Ci",
  "content": "Текст легенди...",
  "story_type": "legend",
  "tags": ["ci", "legend"],
  "participants": ["Ci"],
  "location": "Цифровий простір"
}

Response: KazkarStory object
```

#### `GET /api/kazkar/stories/{id}`
Отримати запис за ID

#### `PUT /api/kazkar/stories/{id}`
Оновити запис або легенду

#### `DELETE /api/kazkar/stories/{id}`
Видалити запис або легенду

## 4. Стани

### Можливі стани:
- **idle** — очікування
- **loading** — завантаження записів
- **ready** — записи завантажені
- **error** — помилка завантаження

### Типи записів:
- **story** — історія
- **memory** — спогад
- **legend** — легенда
- **fact** — факт

## 5. Зв'язки з модулями

### Інтеграція з іншими модулями:
- **PoDija** — історичні події на таймлайні
- **Gallery** — медіа-вкладення до спогадів
- **Calendar** — прив'язка до конкретних дат
- **Ci** — централізований доступ до пам'яті та легенд Ci
- **Nastrij** — емоційний контекст спогадів

---

## 6. Бібліотека легенд Ci

**Kazkar** є офіційним сховищем (аптекою) для бібліотеки легенд системи Cimeika.

### Що таке легенди Ci?
Легенди Ci — це текстові матеріали, які описують:
- Походження та філософію системи Cimeika
- Історію створення модулів
- Міфологію та символізм системи
- Ключові принципи та цінності

### Як зберігаються легенди Ci?
Всі легенди Ci зберігаються як записи типу `story_type: "legend"` з обов'язковим тегом `"ci"`:

```json
{
  "title": "Легенда про створення Ci",
  "content": "Повний текст легенди...",
  "story_type": "legend",
  "tags": ["ci", "origin", "founding"],
  "participants": ["Ci"],
  "location": "Цифровий простір"
}
```

### Доступ до легенд Ci
- **API**: `/api/kazkar/legends` — всі легенди (в т.ч. Ci)
- **Фільтрація**: `/api/kazkar/stories?story_type=legend&tags=ci` — тільки легенди Ci
- **UI**: Через інтерфейс Kazkar з фільтром по тегу "ci"

### Додаткова інформація
Детальну інформацію про розміщення легенд Ci див.: [`docs/CI_LEGENDS_PLACEMENT.md`](../CI_LEGENDS_PLACEMENT.md)
