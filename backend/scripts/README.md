# Backend Scripts

–¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å –∫–æ—Ä–∏—Å–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ backend —Å–∏—Å—Ç–µ–º–æ—é Cimeika.

## –î–æ—Å—Ç—É–ø–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏

### seed_ci_legends.py

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–æ–ø—É–ª—è—Ü—ñ—è –ª–µ–≥–µ–Ω–¥ Ci –≤ –º–æ–¥—É–ª—ñ Kazkar

**–û–ø–∏—Å**: –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –Ω–∞–±—ñ—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –ª–µ–≥–µ–Ω–¥ Ci –∑ —Ñ–∞–π–ª—É `ci_legends_seed.py` –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å Kazkar.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:
```bash
# –ó –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É
python backend/scripts/seed_ci_legends.py
```

**–©–æ —Ä–æ–±–∏—Ç—å —Å–∫—Ä–∏–ø—Ç**:
1. –ü—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î —Å–µ—Ä–≤—ñ—Å Kazkar
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –ª–µ–≥–µ–Ω–¥–∏ –∑ seed —Ñ–∞–π–ª—É
4. –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —ñ—Å–Ω—É—î –∫–æ–∂–Ω–∞ –ª–µ–≥–µ–Ω–¥–∞ (–∑–∞ –Ω–∞–∑–≤–æ—é)
5. –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ –ª–µ–≥–µ–Ω–¥–∏, –ø—Ä–æ–ø—É—Å–∫–∞—é—á–∏ —ñ—Å–Ω—É—é—á—ñ
6. –í–∏–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–í–∏—Ö—ñ–¥**:
```
============================================================
CI LEGENDS SEEDER
============================================================

üå± Seeding 6 Ci legends into Kazkar...

‚úÖ Created legend: '–õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–æ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è Ci' (ID: 1)
‚úÖ Created legend: '–õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–æ —Å–µ–º–µ—Ä–æ –æ—Ö–æ—Ä–æ–Ω—Ü—ñ–≤' (ID: 2)
‚è≠Ô∏è  Skipping '–õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–æ Kazkar ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ–ª—è –ª–µ–≥–µ–Ω–¥' - already exists (ID: 3)
...

üéâ Successfully seeded 5 new legends!
‚è≠Ô∏è  Skipped 1 existing legends
üìö Total Ci legends in Kazkar: 6

üìä Statistics by type:
   legend: 6
   story: 2
   memory: 1

============================================================
‚úÖ Seeding completed successfully!
============================================================
```

**–í–∏–º–æ–≥–∏**:
- –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ —ñ –¥–æ—Å—Ç—É–ø–Ω–∞
- –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ (`.env`)
- –ú–æ–¥—É–ª—å Kazkar —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π

**–ü—Ä–∏–º—ñ—Ç–∫–∏**:
- –°–∫—Ä–∏–ø—Ç —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–π ‚Äî –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤
- –Ü—Å–Ω—É—é—á—ñ –ª–µ–≥–µ–Ω–¥–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—é—Ç—å—Å—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–∞ –ø–æ–ª–µ–º `title`

---

## –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤

–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ —Å–ª—ñ–¥ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–Ω–≤–µ–Ω—Ü—ñ–π:

### –®–∞–±–ª–æ–Ω —Å–∫—Ä–∏–ø—Ç–∞

```python
#!/usr/bin/env python3
"""
Short description of what the script does

Usage:
    python backend/scripts/your_script.py [options]
"""
import sys
import os

# Add parent directory to path
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '../..')))

from backend.app import ...  # Your imports

def main():
    """Main entry point"""
    try:
        # Your logic here
        print("‚úÖ Success")
        return 0
    except Exception as e:
        print(f"‚ùå Error: {e}")
        return 1

if __name__ == "__main__":
    sys.exit(main())
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **Shebang**: –î–æ–¥–∞–≤–∞–π—Ç–µ `#!/usr/bin/env python3` –Ω–∞ –ø–æ—á–∞—Ç–æ–∫
2. **Docstring**: –û–ø–∏—à—ñ—Ç—å —â–æ —Ä–æ–±–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —ñ —è–∫ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏
3. **Path handling**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `sys.path.insert` –¥–ª—è —ñ–º–ø–æ—Ä—Ç—ñ–≤
4. **Error handling**: –û–±—Ä–æ–±–ª—è–π—Ç–µ –≤–∏–Ω—è—Ç–∫–∏ —ñ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ exit code
5. **User feedback**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –µ–º–æ–¥–∑—ñ –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É:
   - ‚úÖ —É—Å–ø—ñ—Ö
   - ‚ùå –ø–æ–º–∏–ª–∫–∞
   - ‚è≠Ô∏è –ø—Ä–æ–ø—É—â–µ–Ω–æ
   - üå± —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/seeding
   - üìä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - üéâ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
6. **Idempotency**: –†–æ–±—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç–∏ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º–∏ –∫–æ–ª–∏ –º–æ–∂–ª–∏–≤–æ
7. **Logging**: –î–æ–¥–∞–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –¥–ª—è –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

---

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –ó–∞–ø—É—Å–∫ –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
```bash
python backend/scripts/seed_ci_legends.py 2>&1 | tee seed_log.txt
```

### –ó–∞–ø—É—Å–∫ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞–º–∏
```bash
# Development
ENV=development python backend/scripts/seed_ci_legends.py

# Production
ENV=production python backend/scripts/seed_ci_legends.py
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î
python -c "from backend.app.config.database import SessionLocal; db = SessionLocal(); print('‚úÖ DB connected'); db.close()"
```

---

## Troubleshooting

### ImportError: No module named 'backend'
**–ü—Ä–∏—á–∏–Ω–∞**: –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

**–†—ñ—à–µ–Ω–Ω—è**: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∑ –∫–æ—Ä–µ–Ω—è –ø—Ä–æ—î–∫—Ç—É:
```bash
cd /path/to/cimeika-unified
python backend/scripts/your_script.py
```

### Database connection error
**–ü—Ä–∏—á–∏–Ω–∞**: –ë–î –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞

**–†—ñ—à–µ–Ω–Ω—è**:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env` —Ñ–∞–π–ª
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω–∏–π
3. –í–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

### Permission denied
**–ü—Ä–∏—á–∏–Ω–∞**: –§–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ –º–∞—î –ø—Ä–∞–≤ –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

**–†—ñ—à–µ–Ω–Ω—è**:
```bash
chmod +x backend/scripts/your_script.py
```

---

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–î–ª—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –º–æ–¥—É–ª—å Kazkar —Ç–∞ –ª–µ–≥–µ–Ω–¥–∏ Ci –¥–∏–≤.:
- [`docs/modules/kazkar.md`](../../docs/modules/kazkar.md)
- [`docs/CI_LEGENDS_PLACEMENT.md`](../../docs/CI_LEGENDS_PLACEMENT.md)
- [`docs/CI_LEGEND_RESEARCH_ROADMAP.md`](../../docs/CI_LEGEND_RESEARCH_ROADMAP.md)
